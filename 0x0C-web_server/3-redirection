#!/usr/bin/env bash
# configure ngix server so that '/redirect_me' redirects to another page

# Install Nginx if not installed
if ! dpkg -l | grep -q nginx; then
   sudo apt-get update
   sudo apt-get install -y nginx
fi

# Define the Nginx configuration file path
nginx_config_file="/etc/nginx/sites-available/default"

# Define the redirection configuration
redirection_config="location /redirect_me {
    return 301 https://www.youtube.com/watch?v=QH2-TGUlwu4;
}"

# Enable the redirection in Nginx configuration
if ! grep -q "location /redirect_me" "$nginx_config_file"; then
   echo "$redirection_config" sudo tee -a "$nginx_config_file"
fi

# test configuration and reload
sudo nginx -t
sudo service nginx reload
